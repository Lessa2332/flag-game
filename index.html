
<!DOCTYPE html>
<html lang="uk" allow="camera">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–°–∫–ª–∞–¥–∏ –ø—Ä–∞–ø–æ—Ä</title>

  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.0/aframe/build/aframe-ar.js"></script>
  <!-- üî• –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ unpkg ‚Äî –Ω–∞–¥—ñ–π–Ω—ñ—à–µ -->
  <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

  <style>
    .overlay {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #FFD700;
      font-size: 2em;
      font-weight: bold;
      text-shadow: 2px 2px 6px #000;
      z-index: 10;
    }
    #success-screen {
      display: none;
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: #fff3e0;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 100;
      display: flex;
      flex-direction: column;
    }
  </style>
</head>
<body>

  <div class="overlay">üì± –ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –±–ª–æ–∫–∏, —â–æ–± —Å–∫–ª–∞—Å—Ç–∏ –ø—Ä–∞–ø–æ—Ä!</div>

  <div id="success-screen">
    <h1>üéâ –í—ñ—Ç–∞—é —Ç–µ–±–µ!</h1>
    <p>–¢–∏ —Å–∫–ª–∞–≤(–ª–∞) –ø—Ä–∞–ø–æ—Ä –£–∫—Ä–∞—ó–Ω–∏! üá∫üá¶</p>
    <button onclick="resetGame()">–©–µ —Ä–∞–∑</button>
  </div>

  <a-scene
    embedded
    cursor="rayOrigin: mouse"
    arjs="trackingMethod: best; debugUIEnabled: false; emitevents: true;"
    vr-mode-ui="enabled: false"
  >
    <a-camera rotation-reader arjs-camera></a-camera>

    <a-marker preset="hiro">
      <a-box
        id="blue-part"
        position="0.5 0.5 0"
        width="1" height="0.3" depth="0.1"
        color="#0057b7"
        class="aframe-draggable"
      ></a-box>

      <a-box
        id="yellow-part"
        position="-0.5 0.5 0"
        width="1" height="0.3" depth="0.1"
        color="#ffd700"
        class="aframe-draggable"
      ></a-box>

      <!-- –¶—ñ–ª—å ‚Äî –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
      <a-plane id="target-blue" visible="false" position="0 0.15 0" width="1.2" height="0.4"></a-plane>
      <a-plane id="target-yellow" visible="false" position="0 -0.15 0" width="1.2" height="0.4"></a-plane>
    </a-marker>
  </a-scene>

  <script>
    function checkPosition() {
      const blue = document.getElementById('blue-part');
      const yellow = document.getElementById('yellow-part');
      const targetBlue = document.getElementById('target-blue');
      const targetYellow = document.getElementById('target-yellow');

      if (!blue || !yellow || !targetBlue || !targetYellow) return;

      const posBlue = blue.object3D.position;
      const posYellow = yellow.object3D.position;
      const posTgtBlue = targetBlue.object3D.position;
      const posTgtYellow = targetYellow.object3D.position;

      const distBlue = posBlue.distanceTo(posTgtBlue);
      const distYellow = posYellow.distanceTo(posTgtYellow);

      if (distBlue < 0.2 && distYellow < 0.2) {
        document.querySelector('.overlay').style.display = 'none';
        document.getElementById('success-screen').style.display = 'flex';
      }
    }

    document.addEventListener('dragend', () => setTimeout(checkPosition, 100));
    setInterval(checkPosition, 300);

    function resetGame() {
      document.getElementById('blue-part').setAttribute('position', '0.5 0.5 0');
      document.getElementById('yellow-part').setAttribute('position', '-0.5 0.5 0');
      document.getElementById('success-screen').style.display = 'none';
      document.querySelector('.overlay').style.display = 'block';
    }
  </script>

</body>
</html>
